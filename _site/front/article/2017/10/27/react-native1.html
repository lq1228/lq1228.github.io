<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>React Native 搭建开发环境</title>
  <meta name="description" content=" ">

  <link rel="stylesheet" href="/stylesheets/stylesheet.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://lq1228.github.io//front/article/2017/10/27/react-native1.html">
  <link rel="alternate" type="application/rss+xml" title="lq1228.github.io" href="http://lq1228.github.io//feed.xml">
  <link rel="icon" href="/favicon.ico" type="image/x-icon" />
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
</head>


  <body>

    <header class="main-header">
    <div class="inner">
        <h1>liqian</h1>
        <blockquote>
            <p>
            <p>
        </blockquote>
        <a href="https://github.com/lq1228" class="button"><small>Follow me on</small> GitHub</a>
    </div>
</header>


    <div class="page-content">
      <div class="wrapper">
        <nav>当前位置：<a href="/">首页</a> &gt; <a href="/front/article/2017/10/27/react-native1.html">React Native 搭建开发环境</a></nav>
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">React Native 搭建开发环境</h1>
    <p class="post-meta"><time datetime="2017-10-27T10:49:42+08:00" itemprop="datePublished">Oct 27, 2017</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <h4 id="section">安装必须的软件</h4>

<h5 id="homebrew">Homebrew</h5>

<p>Homebrew, Mac系统的包管理器，用于安装NodeJS和一些其他必需的工具软件。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">/</span><span class="nx">usr</span><span class="o">/</span><span class="nx">bin</span><span class="o">/</span><span class="nx">ruby</span> <span class="o">-</span><span class="nx">e</span> <span class="s2">"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</span></code></pre></figure>

<p>译注：在Max OS X 10.11（El Capitan)版本中，homebrew在安装软件时可能会碰到/usr/local目录不可写的权限问题。可以使用下面的命令修复：</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">sudo</span> <span class="nx">chown</span> <span class="o">-</span><span class="nx">R</span> <span class="err">`</span><span class="nx">whoami</span><span class="err">`</span> <span class="o">/</span><span class="nx">usr</span><span class="o">/</span><span class="nx">local</span></code></pre></figure>

<h5 id="node">Node</h5>

<p>使用Homebrew来安装Node.js.</p>

<p>React Native需要NodeJS 4.0或更高版本。本文发布时Homebrew默认安装的是6.x版本，完全满足要求。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">brew</span> <span class="nx">install</span> <span class="nx">node</span></code></pre></figure>

<p>安装完node后建议设置npm镜像以加速后面的过程（或使用科学上网工具）。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">npm</span> <span class="nx">config</span> <span class="nx">set</span> <span class="nx">registry</span> <span class="nx">https</span><span class="err">:</span><span class="c1">//registry.npm.taobao.org --global</span>
<span class="nx">npm</span> <span class="nx">config</span> <span class="nx">set</span> <span class="nx">disturl</span> <span class="nx">https</span><span class="err">:</span><span class="c1">//npm.taobao.org/dist --global</span></code></pre></figure>

<h5 id="react-nativereact-native-cli">React Native的命令行工具（react-native-cli）</h5>

<p>React Native的命令行工具用于执行创建、初始化、更新项目、运行打包服务（packager）等任务。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">npm</span> <span class="nx">install</span> <span class="o">-</span><span class="nx">g</span> <span class="nx">react</span><span class="o">-</span><span class="kr">native</span><span class="o">-</span><span class="nx">cli</span></code></pre></figure>

<p>如果你看到EACCES: permission denied这样的权限报错，那么请参照上文的homebrew译注，修复/usr/local目录的所有权：</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">sudo</span> <span class="nx">chown</span> <span class="o">-</span><span class="nx">R</span> <span class="err">`</span><span class="nx">whoami</span><span class="err">`</span> <span class="o">/</span><span class="nx">usr</span><span class="o">/</span><span class="nx">local</span></code></pre></figure>

<h5 id="xcode">Xcode</h5>

<p>React Native目前需要Xcode 7.0 或更高版本。你可以通过App Store或是到Apple开发者官网上下载。这一步骤会同时安装Xcode IDE和Xcode的命令行工具。</p>

<p>虽然一般来说命令行工具都是默认安装了，但你最好还是启动Xcode，并在Xcode–Preferences–Locations菜单中检查一下是否装有某个版本的Command Line Tools。Xcode的命令行工具中也包含一些必须的工具，比如git等。</p>

<h4 id="android-studio">Android Studio</h4>

<p>如果需要安装到Android平台的话，需要以下操作，如果是ios, 可以直接跳到推荐安装的工具或者测试安装了</p>

<p>React Native目前需要Android Studio2.0或更高版本。</p>

<p>Android Studio需要Java Development Kit [JDK] 1.8或更高版本。你可以在命令行中输入 javac -version来查看你当前安装的JDK版本。如果版本不合要求，则可以到 官网上下载。
Android Studio包含了运行和测试React Native应用所需的Android SDK和模拟器。</p>

<p>除非特别注明，请不要改动安装过程中的选项。比如Android Studio默认安装了 Android Support Repository，而这也是React Native必须的（否则在react-native run-android时会报appcompat-v7包找不到的错误）。</p>

<p>安装过程中有一些需要改动的选项：</p>

<p>选择Custom选项：</p>

<p><img src="/images/react-native/android1.png" alt="android" /></p>

<p>勾选Performance和Android Virtual Device</p>

<p><img src="/images/react-native/android2.png" alt="android" /></p>

<table>
  <tbody>
    <tr>
      <td>安装完成后，在Android Studio的启动欢迎界面中选择Configure</td>
      <td>SDK Manager。</td>
    </tr>
  </tbody>
</table>

<p><img src="/images/react-native/android3.png" alt="android" /></p>

<p>在SDK Platforms窗口中，选择Show Package Details，然后在Android 6.0 (Marshmallow)中勾选Google APIs、Intel x86 Atom System Image、Intel x86 Atom_64 System Image以及Google APIs Intel x86 Atom_64 System Image。</p>

<p><img src="/images/react-native/android4.png" alt="android" /></p>

<p>在SDK Tools窗口中，选择Show Package Details，然后在Android SDK Build Tools中勾选Android SDK Build-Tools 23.0.1。（必须是这个版本）</p>

<p><img src="/images/react-native/android5.png" alt="android" /></p>

<h5 id="androidhome">ANDROID_HOME环境变量</h5>

<p>确保ANDROID_HOME环境变量正确地指向了你安装的Android SDK的路径。具体的做法是把下面的命令加入到~/.bash_profile文件中：(译注：~表示用户目录，即/Users/你的用户名/，而小数点开头的文件在Finder中是隐藏的，并且这个文件有可能并不存在。请在终端下使用sudo vi ~/.bash_profile命令创建或编辑。如不熟悉vi操作，请点击这里学习）</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">//如果你不是通过Android Studio安装的sdk，则其路径可能不同，请自行确定清楚。</span>
<span class="kr">export</span> <span class="nx">ANDROID_HOME</span><span class="o">=~</span><span class="sr">/Library/</span><span class="nx">Android</span><span class="o">/</span><span class="nx">sdk</span></code></pre></figure>

<p>然后使用下列命令使其立即生效（否则重启后才生效）：</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">source</span> <span class="o">~</span><span class="sr">/.bash_profile</span></code></pre></figure>

<p>可以使用echo $ANDROID_HOME检查此变量是否已正确设置。</p>

<h4 id="section-1">推荐安装的工具</h4>

<h5 id="watchman">Watchman</h5>

<p><a href="https://facebook.github.io/watchman/docs/install.html">Watchman</a>是由Facebook提供的监视文件系统变更的工具。安装此工具可以提高开发时的性能（packager可以快速捕捉文件的变化从而实现实时刷新）。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">brew</span> <span class="nx">install</span> <span class="nx">watchman</span></code></pre></figure>

<h5 id="flow">Flow</h5>

<p><a href="https://flow.org/">Flow</a>是一个静态的JS类型检查工具。译注：你在很多示例中看到的奇奇怪怪的冒号问号，以及方法参数中像类型一样的写法，都是属于这个flow工具的语法。这一语法并不属于ES标准，只是Facebook自家的代码规范。所以新手可以直接跳过（即不需要安装这一工具，也不建议去费力学习flow相关语法）。</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">brew</span> <span class="nx">install</span> <span class="nx">flow</span></code></pre></figure>

<h5 id="nuclide">Nuclide</h5>

<p><a href="https://nuclide.io/">Nuclide</a>是由Facebook提供的基于atom的集成开发环境，可用于编写、<a href="https://nuclide.io/docs/platforms/react-native/#running-applications">运行</a>和 <a href="https://nuclide.io/docs/platforms/react-native/#debugging">调试</a>React Native应用。</p>

<p>点击这里阅读<a href="https://nuclide.io/docs/quick-start/getting-started/">Nuclide的入门文档</a>。</p>

<p>译注：我们更推荐使用<a href="https://www.jetbrains.com/webstorm/">WebStorm</a>或<a href="http://www.sublimetext.com/">Sublime Text</a>来编写React Native应用。</p>

<h4 id="section-2">测试安装</h4>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">react</span><span class="o">-</span><span class="kr">native</span> <span class="nx">init</span> <span class="nx">AwesomeProject</span>
<span class="nx">cd</span> <span class="nx">AwesomeProject</span>
<span class="nx">react</span><span class="o">-</span><span class="kr">native</span> <span class="nx">run</span><span class="o">-</span><span class="nx">ios</span></code></pre></figure>

<p>你也可以在Nuclide中打开AwesomeProject文件夹 然后运行，或是双击ios/AwesomeProject.xcodeproj文件然后在Xcode中点击Run按钮。</p>

<h4 id="section-3">修改项目</h4>

<p>现在你已经成功运行了项目，我们可以开始尝试动手改一改了：</p>

<p>使用你喜欢的编辑器打开index.ios.js并随便改上几行。
在iOS Emulator中按下⌘-R就可以刷新APP并看到你的最新修改！
完成了！
恭喜！你已经成功运行并修改了你的第一个React Native应用。</p>


  </div>

</article>
<!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="/front/article/2017/10/27/react-native1" data-title="React Native 搭建开发环境" data-url="/front/article/2017/10/27/react-native1.html"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"lq1228"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0] 
         || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
    </script>
<!-- 多说公共JS代码 end -->

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="friend-link">
        <div class="friend-title">友情链接</div>
        
            <a href="https://bystep15.github.io/">
		宝宝树前端团队博客
	    </a>
	
            <a href="http://testudy.github.io/">
		胡继伟
	    </a>
	
            <a href="https://yj1438.github.io/">
		尹杰
	    </a>
	
            <a href="https://github.com/cnsnake11/blog">
		曹楠
	    </a>
	
            <a href="http://ushtml.com/">
		武明礼
	    </a>
	
            <a href="http://kouyun.me/">
		寇云
	    </a>
	
            <a href="http://brooch.me/">
		郑星宬
	    </a>
	
            <a href="http://zhanyouwei.com/">
		占友伟
	    </a>
	
            <a href="https://lilywei739.github.io">
		魏莉
	    </a>
	
            <a href="https://wangjiaoxia.github.io/">
		王娇霞
	    </a>
	
            <a href="http://www.apptranz.com/wk/">
		梁恺韬
	    </a>
	
    </div>

    <div class="copyright">
      <p>lq1228.github.io</p>
    </div>

  </div>

</footer>


  </body>

</html>
